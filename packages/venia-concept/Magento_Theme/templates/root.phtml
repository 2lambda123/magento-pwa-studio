<?php
/**
 * Copyright Â© Magento, Inc. All rights reserved.
 * See COPYING.txt for license details.
 */

/**
 * Try not to put things in this file.
 */

// @codingStandardsIgnoreFile
/** @var $block Magento\Pwa\Block\Bundle */
?>
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Venia</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>
  <body>
    <div id="root"></div>
    <?php
      /**
       * The proxy server sends a value of "development" for this custom header,
       * so we know, despite the proxy mimicking a real browser in other ways,
       * that we are in development mode and no vendor bundle is being generated.
       * This is a hack that should last only until decoupling of the middle tier.
       */
      $nodeEnvHeader = 'HTTP_X_NODE_ENV';
      $nodeEnv = 'unknown';
      if (isset($_SERVER[$nodeEnvHeader])) {
        $nodeEnv = strtolower($_SERVER[$nodeEnvHeader]);
      }
      echo "<!-- X_NODE_ENV is '" . $nodeEnv . "' -->\n";
      if ( $nodeEnv == "development" ) { ?>
    <!-- Not emitting vendor bundle in development mode -->
    <?php } else { ?>
    <script defer src="/static/frontend/Magento/venia/en_US/js/vendor.js"></script>
    <?php } ?>
    <script defer src="/static/frontend/Magento/venia/en_US/js/client.js"></script>
  </body>
</html>
